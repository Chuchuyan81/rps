# üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è –∏–≥—Ä—ã "–ö–∞–º–µ–Ω—å, –ù–æ–∂–Ω–∏—Ü—ã, –ë—É–º–∞–≥–∞"

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ê–∫–∫–∞—É–Ω—Ç –≤ Supabase
- –°–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –≤ Supabase

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π
1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://app.supabase.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `Settings` > `API`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Project URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://yourproject.supabase.co`)
   - **Anon/Public key**

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤ –∫–æ–¥–µ
–ó–∞–º–µ–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `script.js` —Å—Ç—Ä–æ–∫–∏:
```javascript
const supabaseUrl = "https://kdbbyqsdmucjvsatbiog.supabase.co";
const supabaseKey = "–≤–∞—à-anon-key-–∑–¥–µ—Å—å";
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `Database` > `SQL Editor`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase-setup.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Realtime
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `Database` > `Tables`
2. –ù–∞–π–¥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `games`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ–ª–æ–Ω–∫–µ "Realtime" —Å—Ç–æ–∏—Ç –≥–∞–ª–æ—á–∫–∞ ‚úÖ

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RLS (Row Level Security)
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å RLS
SELECT schemaname, tablename, rowsecurity 
FROM pg_tables 
WHERE tablename = 'games';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏
SELECT * FROM pg_policies WHERE tablename = 'games';
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Supabase library not loaded"
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CDN –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:
```html
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Connection test failed"
**–ü—Ä–∏—á–∏–Ω—ã**:
1. –ù–µ–≤–µ—Ä–Ω—ã–µ API –∫–ª—é—á–∏
2. –¢–∞–±–ª–∏—Ü–∞ `games` –Ω–µ —Å–æ–∑–¥–∞–Ω–∞
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ RLS

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç setup
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–±–ª–µ–º–∞: Realtime –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ø—É–±–ª–∏–∫–∞—Ü–∏—é:
```sql
ALTER PUBLICATION supabase_realtime ADD TABLE games;
```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Dashboard: `Database` > `Replication`

### –ü—Ä–æ–±–ª–µ–º–∞: "–ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
**–ü—Ä–∏—á–∏–Ω—ã**:
1. –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞
2. RLS –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π room_id

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
SELECT * FROM information_schema.tables WHERE table_name = 'games';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
SELECT * FROM games LIMIT 5;
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä (–∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞):
```javascript
// –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
const testSupabase = async () => {
  const { data, error } = await supabase
    .from('games')
    .select('count')
    .limit(1);
  
  console.log('Test result:', { data, error });
};

testSupabase();
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∑–∞–ø–∏—Å–∏:
```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã
const testRoom = async () => {
  const { data, error } = await supabase
    .from('games')
    .insert([{
      room_id: 'TEST123',
      player1_id: 'test_player',
      status: 'waiting_player2'
    }])
    .select();
  
  console.log('Test room:', { data, error });
};

testRoom();
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã games

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | BIGSERIAL | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `room_id` | TEXT | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–æ–º–Ω–∞—Ç—ã |
| `player1_id` | TEXT | ID –ø–µ—Ä–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ |
| `player2_id` | TEXT | ID –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞ |
| `player1_choice` | TEXT | –í—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ 1 |
| `player2_choice` | TEXT | –í—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ 2 |
| `status` | TEXT | –°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã |
| `created_at` | TIMESTAMPTZ | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è |
| `updated_at` | TIMESTAMPTZ | –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Ç—Ä–æ–≥–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏**:
```sql
-- –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –∏–≥—Ä—É
CREATE POLICY "Players can see own games" ON games
  FOR SELECT USING (player1_id = auth.uid() OR player2_id = auth.uid());
```

2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ–º–µ–Ω—ã**:
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –≤ Supabase Dashboard
   - –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**:
   - –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ó–∞–º–µ–Ω–∏—Ç–µ –∞–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### GitHub Pages:
1. –û–±–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á–∏ –≤ `script.js`
2. Commit –∏ push –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –í–∫–ª—é—á–∏—Ç–µ GitHub Pages –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### Vercel/Netlify:
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`
2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –£–∂–µ —Å–æ–∑–¥–∞–Ω—ã –≤ setup —Å–∫—Ä–∏–ø—Ç–µ
CREATE INDEX idx_games_room_id ON games(room_id);
CREATE INDEX idx_games_status ON games(status);
```

### –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å cron
SELECT cleanup_old_games();
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Supabase —Å–µ—Ä–≤–∏—Å–æ–≤
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Supabase](https://supabase.com/docs) 